<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>상품 라벨 - LS-3108 (14칸)</title>
<style>
  @page { size: A4; margin: 6mm; }
  body { font-family: Arial, 'Apple SD Gothic Neo', sans-serif; margin:0; }
  .sheet { display: grid; grid-template-columns: repeat(2, 99.1mm); grid-auto-rows: 38.1mm; gap: 2mm 2mm; }
  .label { border: 1px dashed #ddd; padding: 3mm; box-sizing: border-box; overflow: hidden; }
  .code { font-size: 14px; font-weight: 700; }
  .name { font-size: 11px; margin-top: 2mm; }
  .meta { font-size: 10px; color:#333; margin-top: 1.5mm; }
  .qr { float:right; width:22mm; height:22mm; border:1px solid #eee; display:flex; align-items:center; justify-content:center; font-size:9px; color:#777; }
  .no-print { padding: 10px; }
  @media print { .no-print { display:none; } .label { border: none; } }
</style>
</head>
<body>
<div class="no-print">
  <button onclick="window.print()">인쇄</button>
  <span style="margin-left:10px;">Formtec LS-3108 (14칸 99.1×38.1) — 상품 라벨</span>
</div>

<div class="sheet">
{% for r in rows %}
  {% for _ in range(copies) %}
  <div class="label">
    <div class="qr" data-qr="품번: {{ r.item_code }} / 품명: {{ r.item_name }} / LOT: {{ r.lot }} / 규격: {{ r.spec }} / 위치: {{ r.location }}"></div>
    <div class="code">{{ r.item_code }}</div>
    <div class="name">{{ r.item_name }}</div>
    <div class="meta">LOT: {{ r.lot }} | 규격: {{ r.spec }}</div>
    <div class="meta">LOC: {{ r.location }}</div>
  </div>
  {% endfor %}
{% endfor %}
</div>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script>
  document.querySelectorAll('.qr[data-qr]').forEach((el)=>{
    const txt = el.getAttribute('data-qr');
    el.innerHTML='';
    new QRCode(el,{text:txt,width:80,height:80,correctLevel:QRCode.CorrectLevel.M});
  });
</script>
</body>
</html>

{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>재고 조회</h2>
  <button id="reload">새로고침</button>

  <div class="table-wrap">
    <table id="tbl">
      <thead>
        <tr>
          <th>창고</th><th>로케이션</th><th>품번</th><th>품명</th><th>LOT</th><th>규격</th><th>수량</th><th>비고</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
async function load() {
  const res = await fetch("/api/재고");
  const rows = await res.json();
  const tbody = document.querySelector("#tbl tbody");
  tbody.innerHTML = "";
  for (const r of rows) {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${r.창고}</td>
      <td>${r.로케이션}</td>
      <td>${r.품번}</td>
      <td>${r.품명}</td>
      <td>${r.LOT}</td>
      <td>${r.규격}</td>
      <td class="num">${r.수량}</td>
      <td>${r.비고 ?? ""}</td>
    `;
    tbody.appendChild(tr);
  }
}
document.querySelector("#reload").addEventListener("click", load);
load();
</script>
{% endblock %}
